; NOTE: Assertions have been autogenerated by utils/update_test_checks.py UTC_ARGS: --version 5
; RUN: opt < %s -passes=instcombine -S | FileCheck %s

define void @extract-bytecast(ptr %out, ptr %input, i64 %xstart, i64 %ypos) {
; CHECK-LABEL: define void @extract-bytecast(
; CHECK-SAME: ptr [[OUT:%.*]], ptr [[INPUT:%.*]], i64 [[XSTART:%.*]], i64 [[YPOS:%.*]]) {
; CHECK-NEXT:  [[ENTRY:.*:]]
; CHECK-NEXT:    br label %[[FOR_COND37:.*]]
; CHECK:       [[FOR_COND37]]:
; CHECK-NEXT:    store i64 poison, ptr null, align 1
; CHECK-NEXT:    br label %[[FOR_COND37]]
;
entry:
  br label %for.cond37

for.cond37:
  %0 = call <4 x i32> @llvm.x86.sse2.cvtps2dq(<4 x float> zeroinitializer)
  %1 = call <8 x i16> @llvm.x86.sse2.packssdw.128(<4 x i32> %0, <4 x i32> %0)
  %2 = call <16 x i8> @llvm.x86.sse2.packuswb.128(<8 x i16> %1, <8 x i16> %1)
  %3 = bitcast <16 x i8> %2 to <2 x i64>
  %and.i = and <2 x i64> %3, <i64 4294967295, i64 0>
  %4 = bitcast <2 x i64> %and.i to <16 x b8>
  %shuffle.i = shufflevector <16 x b8> zeroinitializer, <16 x b8> %4, <16 x i32> <i32 0, i32 16, i32 1, i32 17, i32 2, i32 18, i32 3, i32 19, i32 4, i32 20, i32 5, i32 21, i32 6, i32 22, i32 7, i32 23>
  %5 = bytecast exact <16 x b8> %shuffle.i to <2 x i64>
  %vecext.i = extractelement <2 x i64> %5, i64 0
  store i64 %vecext.i, ptr null, align 1
  br label %for.cond37
}
